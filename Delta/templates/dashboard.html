{% extends "base.html" %}

{% block content %}

<h3 class="mb-4">Business Manager Dashboard</h3>

<div class="row g-4">

    <!-- Total Leads -->
    <div class="col-md-3">
        <div class="card text-center p-3 shadow-sm">
            <h6 class="text-muted">Total Leads</h6>
            <h2>{{ total }}</h2>
        </div>
    </div>

    <!-- New Leads -->
    <div class="col-md-3">
        <div class="card text-center p-3 bg-warning shadow-sm">
            <h6>New Leads</h6>
            <h2>{{ new }}</h2>
        </div>
    </div>

    <!-- Contacted -->
    <div class="col-md-3">
        <div class="card text-center p-3 bg-info text-white shadow-sm">
            <h6>Contacted</h6>
            <h2>{{ contacted }}</h2>
        </div>
    </div>

    <!-- Closed Won -->
    <div class="col-md-3">
        <div class="card text-center p-3 bg-success text-white shadow-sm">
            <h6>Closed Won</h6>
            <h2>{{ closed_won }}</h2>
        </div>
    </div>

</div>

<!-- Conversion Rate Section -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="card p-4 shadow-sm">
            <h5>Conversion Rate</h5>
            <h2 class="text-success">{{ conversion_rate }}%</h2>
            <p class="text-muted">
                Percentage of total leads converted into successful deals.
            </p>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card p-4 shadow-sm">
            <h5>Today's Follow-Ups</h5>

            {% if follow_ups|length == 0 %}
                <p class="text-success">No follow-ups today ðŸŽ‰</p>
            {% else %}
                <ul class="list-group">
                    {% for lead in follow_ups %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ lead["name"] }}
                            <span class="badge bg-primary">{{ lead["phone"] }}</span>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}